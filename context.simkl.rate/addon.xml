<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<!--
SIMKL Context Menu - Rating Button
Version: 1.0.1
Last Modified: 2025-12-27

CHANGELOG:
1.0.1 - CRITICAL FIX: Media type detection + professional logging
        - FIXED: Uses ListItem.DBTYPE instead of Container.Content()
        - NOW WORKS: In all views (library, in progress, recently added, etc.)
        - ADDED: VERSION constant for version tracking
        - ADDED: Comprehensive logging with version prefix
        - ADDED: Error handling with try/except and traceback
        - ADDED: Null checks for DBID and media_type
        - IMPROVED: Professional code structure matching main addon
1.0.0 - Initial release with context menu registration
-->
<addon id="context.simkl.rate" 
       name="SIMKL - Rating button" 
       version="1.0.1" 
       provider-name="Claude.ai with assistance from Michael Beck">
    <requires>
        <import addon="xbmc.python" version="3.0.0"/>
        <import addon="script.simkl" version="6.7.0"/>
    </requires>
    <extension point="kodi.context.item">
        <menu id="kodi.core.main">
            <item library="addon.py">
                <label>32000</label>
                <visible>String.IsEqual(ListItem.dbtype,movie) | String.IsEqual(ListItem.dbtype,tvshow) | String.IsEqual(ListItem.dbtype,season) | String.IsEqual(ListItem.dbtype,episode)</visible>
            </item>
        </menu>
    </extension>
    <extension point="xbmc.addon.metadata">
        <summary lang="en_GB">Add SIMKL rating button to context menu in library</summary>
        <description lang="en_GB">Add SIMKL rating button to the context menu in your library.</description>
        <platform>all</platform>
        <license>MIT</license>
        <assets>
            <icon>icon.png</icon>
        </assets>
    </extension>
</addon>
